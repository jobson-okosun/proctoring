<div class="mb-5">
    <h1 class="text-3xl font-bold text-gray-900 mb-2">Unified Tertiary Entrance Exam</h1>
    <p class="text-gray-600">Report for this exam</p>
</div>

<div class="grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-5 gap-2 mb-6">
    <div class="bg-white rounded-xl p-6 border border-gray-200">
        <div class="text-sm text-gray-500 mb-1">Total proctored</div>
        <div class="text-3xl font-bold text-gray-900">0</div>
    </div>
    <div class="bg-white rounded-xl p-6 border border-gray-200">
        <div class="text-sm text-gray-500 mb-1">Total Assigned</div>
        <div class="text-3xl font-bold text-gray-900">0</div>
    </div>
    <div class="bg-white rounded-xl p-6 border border-gray-200">
        <div class="text-sm text-gray-500 mb-1">Total infractions</div>
        <div class="text-3xl font-bold text-gray-900">0</div>
    </div>
    <div class="bg-white rounded-xl p-6 border border-gray-200">
        <div class="text-sm text-gray-500 mb-1">Face detected</div>
        <div class="text-3xl font-bold text-gray-900">0</div>
    </div>
    <div class="bg-white rounded-xl p-6 border border-gray-200">
        <div class="text-sm text-gray-500 mb-1">Multiple Face detected</div>
        <div class="text-3xl font-bold text-gray-900">0</div>
    </div>
    <div class="bg-white rounded-xl p-6 border border-gray-200">
        <div class="text-sm text-gray-500 mb-1">Multiple screen detected</div>
        <div class="text-3xl font-bold text-gray-900">0</div>
    </div>
    <div class="bg-white rounded-xl p-6 border border-gray-200">
        <div class="text-sm text-gray-500 mb-1">Background voices</div>
        <div class="text-3xl font-bold text-gray-900">0</div>
    </div>
    <div class="bg-white rounded-xl p-6 border border-gray-200">
        <div class="text-sm text-gray-500 mb-1">Head turn</div>
        <div class="text-3xl font-bold text-gray-900">0</div>
    </div>
    <div class="bg-white rounded-xl p-6 border border-gray-200">
        <div class="text-sm text-gray-500 mb-1">Screen capture</div>
        <div class="text-3xl font-bold text-gray-900">0</div>
    </div>
    <div class="bg-white rounded-xl p-6 border border-gray-200">
        <div class="text-sm text-gray-500 mb-1">Network manipulation</div>
        <div class="text-3xl font-bold text-gray-900">0</div>
    </div>
    <div class="bg-white rounded-xl p-6 border border-gray-200">
        <div class="text-sm text-gray-500 mb-1">Face mismatch</div>
        <div class="text-3xl font-bold text-gray-900">0</div>
    </div>
    <div class="bg-white rounded-xl p-6 border border-gray-200">
        <div class="text-sm text-gray-500 mb-1">Look away</div>
        <div class="text-3xl font-bold text-gray-900">0</div>
    </div>
</div>

<div class="bg-white rounded-xl overflow-hidden">
    <div class="overflow-x-auto">
        <table class="w-full">
            <thead class="bg-white border-b border-gray-200">
                <tr>
                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Participant</th>
                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">ID</th>
                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Infractions</th>
                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Severity</th>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
                @if (users().length === 0) {
                    <tr>
                        <td colspan="6" class="px-6 py-12 text-center text-gray-500">
                            <svg class="mx-auto h-12 w-12 text-gray-400 mb-4" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" />
                            </svg>
                            <p class="text-lg font-medium">No users found</p>
                            <p class="text-sm">Try adjusting your filters or search query</p>
                        </td>
                    </tr>
                } @else {
                    @for (user of users(); track user.id) {
                        <tr class="hover:bg-gray-50 transition-colors">
                            <td class="px-6 py-4">
                                <div class="flex items-center gap-3">
                                    <div>
                                        <div class="font-medium text-gray-900">{{ user.name }}</div>
                                    </div>
                                </div>
                            </td>
                            <td class="px-6 py-4">AD3F33GT</td>
                            <td class="px-6 py-4">0</td>
                            <td class="px-6 py-4">
                                <span class="rounded-full bg-red-100 text-red-700 px-2 py-1 text-xs border border-red-200">High</span>
                            </td>
                            <td>
                                <button type="button" (click)="menu.toggle($event)">
                                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" />
                                    </svg>
                                </button>

                                <p-menu #menu [popup]="true" appendTo="body">
                                    <ng-template pTemplate="start">
                                        <div class="p-1">
                                            <a [routerLink]="'timeline'" 
                                                class="w-full text-left px-4 py-2 hover:bg-gray-100 rounded-md flex items-center gap-3 text-sm text-gray-700">
                                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" color="#4a4a4a" fill="none" stroke="#141B34" stroke-width="1.5" stroke-linejoin="round">
                                                    <path d="M18.8906 12.846C18.5371 14.189 16.8667 15.138 13.5257 17.0361C10.296 18.8709 8.6812 19.7884 7.37983 19.4196C6.8418 19.2671 6.35159 18.9776 5.95624 18.5787C5 17.6139 5 15.7426 5 12C5 8.2574 5 6.3861 5.95624 5.42132C6.35159 5.02245 6.8418 4.73288 7.37983 4.58042C8.6812 4.21165 10.296 5.12907 13.5257 6.96393C16.8667 8.86197 18.5371 9.811 18.8906 11.154C19.0365 11.7084 19.0365 12.2916 18.8906 12.846Z" />
                                                </svg>

                                                Timeline
                                            </a>
                                        </div>
                                    </ng-template>
                                </p-menu>
                            </td>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>

    <div class="bg-white border-t border-gray-200 pt-3 text-sm! flex">
        <p-paginator 
            [first]="0" 
            [rows]="10" 
            [totalRecords]="users().length" 
            [rowsPerPageOptions]="[10, 20, 50]" 
            (onPageChange)="onPageChange($event)"
            [showCurrentPageReport]="true"
            currentPageReportTemplate="Showing {first} to {last} of {totalRecords} users">
        </p-paginator>
    </div>
</div>
