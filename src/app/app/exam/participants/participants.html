<div>
    <div class="mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
        <div>
            <h1 class="text-2xl sm:text-3xl font-bold text-gray-900 mb-2">Unified Tertiary Entrance Exam</h1>
            <p class="text-sm sm:text-base text-gray-600">Participant list.</p>
        </div>
        <div class="flex items-center gap-3">
            <button (click)="showFilterDrawer.set(true)" class="btn outline">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" />
                </svg>
                <span>Filters</span>
            </button>
        </div>
    </div>

    <div class="bg-[#F7F7F7] rounded-xl overflow-hidden">
        <div class="overflow-x-auto">
            <table class="w-full">
                <thead class="bg-white border-b border-gray-200">
                    <tr>
                        <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Participant</th>
                        <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Infractions</th>
                        <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Status</th>
                        <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Actions</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                    @if (users().length === 0) {
                        <tr>
                            <td colspan="6" class="px-6 py-12 text-center text-gray-500">
                                <svg class="mx-auto h-12 w-12 text-gray-400 mb-4" fill="none" stroke="currentColor"
                                    viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" />
                                </svg>
                                <p class="text-lg font-medium">No users found</p>
                                <p class="text-sm">Try adjusting your filters or search query</p>
                            </td>
                        </tr>
                    } @else {
                        @for (user of users(); track user.id) {
                            <tr class="hover:bg-gray-50 transition-colors">
                                <!-- User Info -->
                                <td class="px-6 py-4">
                                    <div class="flex items-center gap-3">
                                        <div>
                                            <div class="font-medium text-gray-900">{{ user.name }}</div>
                                            <div class="text-sm text-gray-500">1DFG454345</div>
                                        </div>
                                    </div>
                                </td>
                                <td class="px-6 py-4">0</td>
                                <td class="px-6 py-4">
                                    <span class="rounded-full bg-red-100 text-red-700 px-2 py-1 text-xs border border-red-200">Disconnected</span>
                                </td>

                                <td class="px-6 py-4">
                                    <button type="button" (click)="menu.toggle($event)">
                                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" />
                                        </svg>
                                    </button>

                                    <p-menu #menu [popup]="true" appendTo="body">
                                        <ng-template pTemplate="start">
                                            <div class="p-1">
                                                 <a routerLink="1" class="w-full text-left px-4 py-2 hover:bg-gray-100 rounded-md flex items-center gap-3 text-sm text-gray-900">
                                                    View
                                                </a>
                                            </div>
                                            <div class="border-t border-gray-200 my-1"></div>
                                            <div class="p-1">
                                                 <a routerLink="../../../messaging" class="w-full text-left px-4 py-2 hover:bg-gray-100 rounded-md flex items-center gap-3 text-sm text-gray-900">
                                                    Send message
                                                </a>
                                            </div>
                                            <div class="border-t border-gray-200 my-1"></div>
                                            <a [routerLink]="'../../../reports/1/timeline'"
                                                class="w-full text-left px-4 py-2 hover:bg-gray-100 rounded-md flex items-center gap-3 text-sm text-gray-700">
                                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" color="#4a4a4a" fill="none" stroke="#141B34" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                                    <path d="M7 18V16M12 18V15M17 18V13M2.5 12C2.5 7.52166 2.5 5.28249 3.89124 3.89124C5.28249 2.5 7.52166 2.5 12 2.5C16.4783 2.5 18.7175 2.5 20.1088 3.89124C21.5 5.28249 21.5 7.52166 21.5 12C21.5 16.4783 21.5 18.7175 20.1088 20.1088C18.7175 21.5 16.4783 21.5 12 21.5C7.52166 21.5 5.28249 21.5 3.89124 20.1088C2.5 18.7175 2.5 16.4783 2.5 12Z" />
                                                    <path d="M5.99219 11.4863C8.14729 11.5581 13.0341 11.2328 15.8137 6.82132M13.9923 6.28835L15.8678 5.98649C16.0964 5.95738 16.432 6.13785 16.5145 6.35298L17.0104 7.99142" />
                                                </svg>
                                                Reports
                                            </a>
                                        </ng-template>
                                    </p-menu>
                                </td>
                            </tr>
                        }
                    }
                </tbody>
            </table>
        </div>

        <div class="bg-white border-t border-gray-200 pt-3 text-sm! flex">
            <p-paginator 
                [first]="0" 
                [rows]="10" 
                [totalRecords]="users().length" 
                [rowsPerPageOptions]="[10, 20, 50]" 
                (onPageChange)="onPageChange($event)"
                [showCurrentPageReport]="true"
                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} users">
            </p-paginator>
        </div>
    </div>

    <p-drawer [(visible)]="showFilterDrawer" position="right" [style]="{width: '28rem'}">
        <ng-template pTemplate="header">
            <h2 class="text-xl font-bold text-gray-900">Filters</h2>
        </ng-template>

        <div class="space-y-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Search</label>
                <input type="text" placeholder="Search by ID" />
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                <select>
                    <option value="active">Connected</option>
                    <option value="suspended">Ofline</option>
                </select>
            </div>
        </div>

        <ng-template pTemplate="footer">
            <div class="flex items-center gap-3">
                <button class="btn outline" style="flex: 1">
                    Reset
                </button>
                <button class="btn fill" style="flex: 1">
                    Apply Filters
                </button>
            </div>
        </ng-template>
    </p-drawer>